import{a as F,b as W,c as m,d as x,e as T,f as v}from"./useFocusable-B7HbK8LX.js";import{r as u}from"./index-BCtMShv3.js";import{d as B}from"./usePress-CzPFgv00.js";function G(b){let{isDisabled:h,onBlurWithin:i,onFocusWithin:o,onFocusWithinChange:t}=b,r=u.useRef({isFocusWithin:!1}),{addGlobalListener:f,removeAllGlobalListeners:l}=B(),n=u.useCallback(e=>{e.currentTarget.contains(e.target)&&r.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(r.current.isFocusWithin=!1,l(),i&&i(e),t&&t(!1))},[i,t,r,l]),d=F(n),g=u.useCallback(e=>{if(!e.currentTarget.contains(e.target))return;const a=W(e.target),p=m(a);if(!r.current.isFocusWithin&&p===x(e.nativeEvent)){o&&o(e),t&&t(!0),r.current.isFocusWithin=!0,d(e);let c=e.currentTarget;f(a,"focus",$=>{if(r.current.isFocusWithin&&!T(c,$.target)){let s=new v("blur",new a.defaultView.FocusEvent("blur",{relatedTarget:$.target}));s.target=c,s.currentTarget=c,n(s)}},{capture:!0})}},[o,t,d,f,n]);return h?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:g,onBlur:n}}}export{G as $};
