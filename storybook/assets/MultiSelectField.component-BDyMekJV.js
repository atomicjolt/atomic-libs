import{j as b}from"./jsx-runtime-D_zvdyIk.js";import{r as u}from"./index-BCtMShv3.js";import{$ as w}from"./PressResponder-Ct7jIFb_.js";import{a as D,b as B}from"./index-CpD3xGg5.js";import{O as x}from"./context-AES9ne4t.js";import{u as I}from"./useRenderProps-CP918x9p.js";import{c as _,u as k}from"./index-CsiUWFDz.js";import{$ as K}from"./CollectionBuilder-D7AJqdfd.js";import{P as N}from"./Provider-op_UCnZE.js";import{P as j}from"./Popover.context-C-WvC77F.js";import{d as z}from"./styled-components.browser.esm-Y4FpNNpy.js";import{m as F}from"./mixins-XviowZ_6.js";import{$ as U}from"./useFormValidationState-CONlS5Wo.js";import{$ as E}from"./useOverlayTriggerState-e1JH9f22.js";import{$ as T}from"./useListState-DGbAgUcw.js";import{b as P,$ as L,f as H}from"./useObjectRef-D2RG7rRi.js";import{$ as W}from"./filterDOMProps-CeZl_uWj.js";import{$ as A}from"./useSelectableList-DOP2QP6A.js";import{c as X}from"./useSelectableItem-CvsJxqRU.js";import{h as G}from"./useFocusable-DacP9xvE.js";import{$ as J}from"./useCollator-CKtzjMN3.js";import{$ as Q}from"./useField-BY78xfaL.js";import{$ as Y}from"./useMenuTrigger-oprA2QPW.js";import{L as Z}from"./Label.context-BbpE5KUK.js";import{M as ee}from"./Message.context-D8t47jMD.js";import{E as ae}from"./ErrorMessage.context-PYwFF-7o.js";import{B as le}from"./Button.context-BxdzJgC_.js";const te=z.div`
  ${F.SizingX}
  ${F.FieldStatus}
`,ne=_(),oe=u.createContext(null);function ie(e){const a=E(e),[t,i]=u.useState("first"),n=T({...e,selectionMode:"multiple",onSelectionChange:l=>{var s;(s=e.onSelectionChange)==null||s.call(e,l)}}),[c,m]=u.useState(!1),f=U({...e,value:n.selectionManager.selectedKeys.values().next().value});return{...n,...a,...f,selectionMode:"multiple",focusStrategy:t,setSelectedKeys(l){l===null?n.selectionManager.clearSelection():n.selectionManager.setSelectedKeys(l)},open(l="first"){n.collection.size!==0&&(i(l),a.open())},toggle(l="first"){n.collection.size!==0&&(i(l),a.toggle())},isFocused:c,setFocused:m}}const re=new WeakMap;function se(e,a,t){const{keyboardDelegate:i,isDisabled:n,isRequired:c,name:m,validationBehavior:f="aria"}=e,l=J({usage:"search",sensitivity:"base"}),s=u.useMemo(()=>i||new A(a.collection,a.disabledKeys,null,l),[i,a.collection,a.disabledKeys,l]),{menuTriggerProps:h,menuProps:y}=Y({isDisabled:n,type:"listbox"},a,t),{typeSelectProps:d}=X({keyboardDelegate:s,selectionManager:a.selectionManager,onTypeSelect(o){a.selectionManager.toggleSelection(o)}}),{isInvalid:p,validationErrors:v,validationDetails:C}=a.displayValidation,{labelProps:M,fieldProps:g,descriptionProps:O,errorMessageProps:R}=Q({...e,labelElementType:"label",isInvalid:p,errorMessage:e.errorMessage||v});d.onKeyDown=d.onKeyDownCapture,delete d.onKeyDownCapture;const V=W(e,{labelable:!0}),r=P(d,h,g),S=L();return re.set(a,{isDisabled:n,isRequired:c,name:m,validationBehavior:f}),{labelProps:{...M,onClick:()=>{var o;e.isDisabled||((o=t.current)==null||o.focus(),G("keyboard"))}},triggerProps:P(V,{...r,isDisabled:n,onKeyDown:H(r.onKeyDown,e.onKeyDown),onKeyUp:e.onKeyUp,"aria-labelledby":[S,r["aria-labelledby"],r["aria-label"]&&!r["aria-labelledby"]?r.id:null].filter(Boolean).join(" "),onFocus(o){a.isFocused||(e.onFocus&&e.onFocus(o),e.onFocusChange&&e.onFocusChange(!0),a.setFocused(!0))},onBlur(o){a.isOpen||(e.onBlur&&e.onBlur(o),e.onFocusChange&&e.onFocusChange(!1),a.setFocused(!1))}}),valueProps:{id:S},menuProps:{...y,autoFocus:a.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,disallowEmptySelection:!0,linkBehavior:"selection",selectionMode:"multiple",onBlur:o=>{o.currentTarget.contains(o.relatedTarget)||(e.onBlur&&e.onBlur(o),e.onFocusChange&&e.onFocusChange(!1),a.setFocused(!1))},"aria-labelledby":[g["aria-labelledby"],r["aria-label"]&&!g["aria-labelledby"]?r.id:null].filter(Boolean).join(" ")},descriptionProps:O,errorMessageProps:R,isInvalid:p,validationErrors:v,validationDetails:C}}const q=u.forwardRef(function(a,t){return[a,t]=k(ne,a,t),b.jsx(K,{content:a.children,children:i=>b.jsx($,{...a,collection:i,selectRef:t})})});function $(e){const a=ie({...e,label:!0,children:void 0}),t=u.useRef(null),{labelProps:i,triggerProps:n,menuProps:c,errorMessageProps:m,descriptionProps:f}=se({...e,label:!0},a,t),{isInvalid:l,isDisabled:s,isRequired:h,isReadOnly:y,size:d="medium"}=e,p=I({componentClassName:"aje-multiselect",...e,selectors:{"data-invalid":l,"data-disabled":s,"data-required":h,"data-readonly":y}});return b.jsx(te,{...p,children:b.jsx(N,{values:[[oe.Provider,a],[Z.Provider,i],[ee.Provider,f],[ae.Provider,{...m,isInvalid:l}],[x.Provider,a],[j.Provider,{triggerRef:t,isOpen:a.isOpen,variant:"listbox"}],[D.Provider,c],[B.Provider,a],[x.Provider,a],[le.Provider,{size:d}]],children:b.jsx(w,{...n,ref:t,isPressed:a.isOpen,isDisabled:s||y,children:p.children})})})}try{$.displayName="MultiSelectFieldInner",$.__docgenInfo={description:"MultiSelect is a dropdown that allows the user to select multiple options from a list",displayName:"MultiSelectFieldInner",props:{collection:{defaultValue:null,description:"A pre-constructed collection to use instead of building one from items and children.",name:"collection",required:!0,type:{name:"BaseCollection<T>"}},selectRef:{defaultValue:null,description:"",name:"selectRef",required:!0,type:{name:"RefObject<HTMLButtonElement>"}},isOpen:{defaultValue:null,description:"Sets the open state of the menu.",name:"isOpen",required:!1,type:{name:"boolean"}},defaultOpen:{defaultValue:null,description:"Sets the default open state of the menu.",name:"defaultOpen",required:!1,type:{name:"boolean"}},onOpenChange:{defaultValue:null,description:"Method that is called when the open state of the menu changes.",name:"onOpenChange",required:!1,type:{name:"(isOpen: boolean) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"RenderClassName<FieldRenderProps>"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"RenderStyle<FieldRenderProps>"}},id:{defaultValue:null,description:"Unique id for the component",name:"id",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"auto"'},{value:'"full"'}]}},isDisabled:{defaultValue:null,description:`Field cannot be interacted with, should be de-emphasized in the UI
@selector [data-disabled]`,name:"isDisabled",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"Name of the Field",name:"name",required:!1,type:{name:"string"}},isRequired:{defaultValue:null,description:`Field must be interacted with. Should be indicated in the UI
@selector [data-required]`,name:"isRequired",required:!1,type:{name:"boolean"}},isInvalid:{defaultValue:null,description:"Field has an error. Should be made to look like an error.\nControls whether the value of `error` is displayed\n@selector [data-invalid]",name:"isInvalid",required:!1,type:{name:"boolean"}},isReadOnly:{defaultValue:null,description:`Field cannot be modified. Should be made to not look like a editable field
@selector [data-readonly]`,name:"isReadOnly",required:!1,type:{name:"boolean"}}}}}catch{}try{q.displayName="MultiSelectField",q.__docgenInfo={description:"Building blocks for building custom & accessible multi-select components",displayName:"MultiSelectField",props:{isOpen:{defaultValue:null,description:"Sets the open state of the menu.",name:"isOpen",required:!1,type:{name:"boolean"}},defaultOpen:{defaultValue:null,description:"Sets the default open state of the menu.",name:"defaultOpen",required:!1,type:{name:"boolean"}},onOpenChange:{defaultValue:null,description:"Method that is called when the open state of the menu changes.",name:"onOpenChange",required:!1,type:{name:"(isOpen: boolean) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"RenderClassName<FieldRenderProps>"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"RenderStyle<FieldRenderProps>"}},id:{defaultValue:null,description:"Unique id for the component",name:"id",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"auto"'},{value:'"full"'}]}},isDisabled:{defaultValue:null,description:`Field cannot be interacted with, should be de-emphasized in the UI
@selector [data-disabled]`,name:"isDisabled",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"Name of the Field",name:"name",required:!1,type:{name:"string"}},isRequired:{defaultValue:null,description:`Field must be interacted with. Should be indicated in the UI
@selector [data-required]`,name:"isRequired",required:!1,type:{name:"boolean"}},isInvalid:{defaultValue:null,description:"Field has an error. Should be made to look like an error.\nControls whether the value of `error` is displayed\n@selector [data-invalid]",name:"isInvalid",required:!1,type:{name:"boolean"}},isReadOnly:{defaultValue:null,description:`Field cannot be modified. Should be made to not look like a editable field
@selector [data-readonly]`,name:"isReadOnly",required:!1,type:{name:"boolean"}}}}}catch{}export{q as M,oe as a};
