import{c as m}from"./focusSafely-BOUv7I-8.js";import{r as f}from"./index-DJO9vBfz.js";import{$}from"./useLayoutEffect-Bj1hLagI.js";import{c as v}from"./useObjectRef-BKue9pYL.js";function V(t,i,e){let{validationBehavior:s,focus:u}=t;$(()=>{if(s==="native"&&(e!=null&&e.current)){let a=i.realtimeValidation.isInvalid?i.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";e.current.setCustomValidity(a),e.current.hasAttribute("title")||(e.current.title=""),i.realtimeValidation.isInvalid||i.updateValidation(g(e.current))}});let o=v(()=>{i.resetValidation()}),r=v(a=>{var n;i.displayValidation.isInvalid||i.commitValidation();let c=e==null||(n=e.current)===null||n===void 0?void 0:n.form;if(!a.defaultPrevented&&e&&c&&h(c)===e.current){var d;u?u():(d=e.current)===null||d===void 0||d.focus(),m("keyboard")}a.preventDefault()}),l=v(()=>{i.commitValidation()});f.useEffect(()=>{let a=e==null?void 0:e.current;if(!a)return;let n=a.form;return a.addEventListener("invalid",r),a.addEventListener("change",l),n==null||n.addEventListener("reset",o),()=>{a.removeEventListener("invalid",r),a.removeEventListener("change",l),n==null||n.removeEventListener("reset",o)}},[e,r,l,o,s])}function p(t){let i=t.validity;return{badInput:i.badInput,customError:i.customError,patternMismatch:i.patternMismatch,rangeOverflow:i.rangeOverflow,rangeUnderflow:i.rangeUnderflow,stepMismatch:i.stepMismatch,tooLong:i.tooLong,tooShort:i.tooShort,typeMismatch:i.typeMismatch,valueMissing:i.valueMissing,valid:i.valid}}function g(t){return{isInvalid:!t.validity.valid,validationDetails:p(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function h(t){for(let i=0;i<t.elements.length;i++){let e=t.elements[i];if(!e.validity.valid)return e}return null}export{V as $};
