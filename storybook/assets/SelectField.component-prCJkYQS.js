import{j as b}from"./jsx-runtime-D_zvdyIk.js";import{r as m,R as y}from"./index-BCtMShv3.js";import{a as K,$ as U,f as H}from"./useObjectRef-B4hnndUj.js";import{$ as k}from"./filterDOMProps-CeZl_uWj.js";import{$ as W}from"./useSelectableList-_nP8zjTo.js";import{c as A}from"./useSelectableItem-CnP4hcGx.js";import{h as X}from"./useFocusable-B7HbK8LX.js";import{$ as G}from"./useCollator-CKtzjMN3.js";import{$ as J}from"./useField-D8gfBVj0.js";import{$ as Q}from"./useMenuTrigger-C3jA6F6b.js";import{$ as Y}from"./useFormReset-GcAVnfXr.js";import{$ as Z}from"./useFormValidation-CnIG3AAh.js";import{a as _}from"./VisuallyHidden-BB9-VGne.js";import{$ as ee}from"./PressResponder-CKyj7ZvN.js";import{$ as ae}from"./CollectionBuilder-4ZFsDDvv.js";import{O as w}from"./context-De4It0JK.js";import{u as le}from"./useRenderProps-CP918x9p.js";import{c as te,u as oe}from"./index-C_lK3xe_.js";import{P as ie}from"./Provider-op_UCnZE.js";import{P as re}from"./Popover.context-wYAB1U4T.js";import{d as V}from"./styled-components.browser.esm-Y4FpNNpy.js";import{m as B}from"./mixins-XviowZ_6.js";import{$ as ne}from"./useFormValidationState-CONlS5Wo.js";import{$ as de}from"./useOverlayTriggerState-iq8quOSU.js";import{$ as se}from"./useSingleSelectListState-B0rsPWv9.js";import{L as ce}from"./Label.context-Bxyvy4yx.js";import{M as ue}from"./Message.context-CzffOAUK.js";import{E as fe}from"./ErrorMessage.context-B4seO6gR.js";import{a as me,b as pe}from"./ListBox.component-DZFLFxp2.js";import{B as be}from"./Button.context-e0zTg6D5.js";function ve(a){let e=de(a),[l,t]=m.useState(null),o=se({...a,onSelectionChange:n=>{a.onSelectionChange!=null&&a.onSelectionChange(n),e.close(),c.commitValidation()}}),c=ne({...a,value:o.selectedKey}),[s,u]=m.useState(!1);return{...c,...o,...e,focusStrategy:l,open(n=null){o.collection.size!==0&&(t(n),e.open())},toggle(n=null){o.collection.size!==0&&(t(n),e.toggle())},isFocused:s,setFocused:u}}const E=new WeakMap;function ye(a,e,l){let{keyboardDelegate:t,isDisabled:o,isRequired:c,name:s,validationBehavior:u="aria"}=a,n=G({usage:"search",sensitivity:"base"}),i=m.useMemo(()=>t||new W(e.collection,e.disabledKeys,l,n),[t,e.collection,e.disabledKeys,n]),{menuTriggerProps:f,menuProps:d}=Q({isDisabled:o,type:"listbox"},e,l),h=r=>{switch(r.key){case"ArrowLeft":{var C,F;r.preventDefault();let x=e.selectedKey!=null?(C=i.getKeyAbove)===null||C===void 0?void 0:C.call(i,e.selectedKey):(F=i.getFirstKey)===null||F===void 0?void 0:F.call(i);x&&e.setSelectedKey(x);break}case"ArrowRight":{var R,D;r.preventDefault();let x=e.selectedKey!=null?(R=i.getKeyBelow)===null||R===void 0?void 0:R.call(i,e.selectedKey):(D=i.getFirstKey)===null||D===void 0?void 0:D.call(i);x&&e.setSelectedKey(x);break}}},{typeSelectProps:v}=A({keyboardDelegate:i,selectionManager:e.selectionManager,onTypeSelect(r){e.setSelectedKey(r)}}),{isInvalid:P,validationErrors:$,validationDetails:O}=e.displayValidation,{labelProps:T,fieldProps:S,descriptionProps:N,errorMessageProps:z}=J({...a,labelElementType:"span",isInvalid:P,errorMessage:a.errorMessage||$});v.onKeyDown=v.onKeyDownCapture,delete v.onKeyDownCapture;let L=k(a,{labelable:!0}),p=K(v,f,S),q=U();return E.set(e,{isDisabled:o,isRequired:c,name:s,validationBehavior:u}),{labelProps:{...T,onClick:()=>{if(!a.isDisabled){var r;(r=l.current)===null||r===void 0||r.focus(),X("keyboard")}}},triggerProps:K(L,{...p,isDisabled:o,onKeyDown:H(p.onKeyDown,h,a.onKeyDown),onKeyUp:a.onKeyUp,"aria-labelledby":[q,p["aria-labelledby"],p["aria-label"]&&!p["aria-labelledby"]?p.id:null].filter(Boolean).join(" "),onFocus(r){e.isFocused||(a.onFocus&&a.onFocus(r),a.onFocusChange&&a.onFocusChange(!0),e.setFocused(!0))},onBlur(r){e.isOpen||(a.onBlur&&a.onBlur(r),a.onFocusChange&&a.onFocusChange(!1),e.setFocused(!1))}}),valueProps:{id:q},menuProps:{...d,autoFocus:e.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,disallowEmptySelection:!0,linkBehavior:"selection",onBlur:r=>{r.currentTarget.contains(r.relatedTarget)||(a.onBlur&&a.onBlur(r),a.onFocusChange&&a.onFocusChange(!1),e.setFocused(!1))},"aria-labelledby":[S["aria-labelledby"],p["aria-label"]&&!S["aria-labelledby"]?p.id:null].filter(Boolean).join(" ")},descriptionProps:N,errorMessageProps:z,isInvalid:P,validationErrors:$,validationDetails:O}}function $e(a,e,l){let t=E.get(e)||{},{autoComplete:o,name:c=t.name,isDisabled:s=t.isDisabled}=a,{validationBehavior:u,isRequired:n}=t,{visuallyHiddenProps:i}=_();Y(a.selectRef,e.selectedKey,e.setSelectedKey),Z({validationBehavior:u,focus:()=>{var d;return(d=l.current)===null||d===void 0?void 0:d.focus()}},e,a.selectRef);var f;return{containerProps:{...i,"aria-hidden":!0,"data-react-aria-prevent-focus":!0,"data-a11y-ignore":"aria-hidden-focus"},inputProps:{style:{display:"none"}},selectProps:{tabIndex:-1,autoComplete:o,disabled:s,required:u==="native"&&n,name:c,value:(f=e.selectedKey)!==null&&f!==void 0?f:void 0,onChange:d=>e.setSelectedKey(d.target.value)}}}function xe(a){let{state:e,triggerRef:l,label:t,name:o,isDisabled:c}=a,s=m.useRef(null),{containerProps:u,selectProps:n}=$e({...a,selectRef:s},e,l);var i;return e.collection.size<=300?y.createElement("div",{...u,"data-testid":"hidden-select-container"},y.createElement("label",null,t,y.createElement("select",{...n,ref:s},y.createElement("option",null),[...e.collection.getKeys()].map(f=>{let d=e.collection.getItem(f);if(d&&d.type==="item")return y.createElement("option",{key:d.key,value:d.key},d.textValue)})))):o?y.createElement("input",{type:"hidden",autoComplete:n.autoComplete,name:o,disabled:c,value:(i=e.selectedKey)!==null&&i!==void 0?i:""}):null}const Pe=V.div`
  ${B.SizingX}
  ${B.FieldStatus}
`,ge=V.span`
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,he=te(),I=m.createContext(null),M=m.createContext(null),g=m.forwardRef(function(e,l){return[e,l]=oe(he,e,l),b.jsx(ae,{content:e.children,children:t=>b.jsx(Se,{...e,collection:t,selectRef:l})})});g.displayName="SelectField";function Se(a){const e=ve({...a,children:void 0}),{selectRef:l}=a,{isInvalid:t,isDisabled:o,isRequired:c,isReadOnly:s,name:u,size:n="medium"}=a,{labelProps:i,triggerProps:f,valueProps:d,menuProps:h,errorMessageProps:v,descriptionProps:P}=ye({...a,label:!0},e,l),$=le({componentClassName:"aje-select",...a,selectors:{"data-invalid":t,"data-disabled":o,"data-required":c,"data-readonly":s}});return b.jsxs(Pe,{...$,...k(a),children:[b.jsx(xe,{isDisabled:o,state:e,triggerRef:l,label:"",name:u}),b.jsx(ie,{values:[[I.Provider,e],[M.Provider,d],[ce.Provider,i],[ue.Provider,P],[fe.Provider,{...v,isInvalid:t}],[w.Provider,e],[re.Provider,{triggerRef:l,isOpen:e.isOpen,variant:"listbox"}],[me.Provider,h],[pe.Provider,e],[w.Provider,e],[be.Provider,{size:n}]],children:b.jsx(ee,{...f,ref:l,isPressed:e.isOpen,isDisabled:o||s,children:$.children})})]})}function j(a){const{placeholder:e}=a,l=m.useContext(M),t=m.useContext(I);return t?b.jsx(ge,{...l,children:t.selectedItem?t.selectedItem.rendered:e}):null}j.displayName="SelectField.Value";g.Value=j;try{g.displayName="SelectField",g.__docgenInfo={description:"",displayName:"SelectField",props:{collection:{defaultValue:null,description:"",name:"collection",required:!0,type:{name:"BaseCollection<T>"}},selectRef:{defaultValue:null,description:"",name:"selectRef",required:!0,type:{name:"RefObject<HTMLButtonElement>"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"RenderStyle<FieldRenderProps>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"RenderClassName<FieldRenderProps>"}},id:{defaultValue:null,description:"Unique id for the component",name:"id",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"auto"'},{value:'"full"'}]}},isDisabled:{defaultValue:null,description:`Field cannot be interacted with, should be de-emphasized in the UI
@selector [data-disabled]`,name:"isDisabled",required:!1,type:{name:"boolean"}},isRequired:{defaultValue:null,description:`Field must be interacted with. Should be indicated in the UI
@selector [data-required]`,name:"isRequired",required:!1,type:{name:"boolean"}},isInvalid:{defaultValue:null,description:"Field has an error. Should be made to look like an error.\nControls whether the value of `error` is displayed\n@selector [data-invalid]",name:"isInvalid",required:!1,type:{name:"boolean"}},isReadOnly:{defaultValue:null,description:`Field cannot be modified. Should be made to not look like a editable field
@selector [data-readonly]`,name:"isReadOnly",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"Name of the Field",name:"name",required:!1,type:{name:"string"}}}}}catch{}export{g as S};
