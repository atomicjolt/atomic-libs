import{$ as I}from"./useLayoutEffect-Bj1hLagI.js";import{r as g}from"./index-DJO9vBfz.js";import{$ as K}from"./SSRProvider-DAMUgb6s.js";const b=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},d=e=>e&&"window"in e&&e.window===e?e:b(e).defaultView||window;function x(e){if(P())e.focus({preventScroll:!0});else{let n=F(e);e.focus(),O(n)}}let v=null;function P(){if(v==null){v=!1;try{document.createElement("div").focus({get preventScroll(){return v=!0,!0}})}catch{}}return v}function F(e){let n=e.parentNode,t=[],r=document.scrollingElement||document.documentElement;for(;n instanceof HTMLElement&&n!==r;)(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth)&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),n=n.parentNode;return r instanceof HTMLElement&&t.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),t}function O(e){for(let{element:n,scrollTop:t,scrollLeft:r}of e)n.scrollTop=t,n.scrollLeft=r}function E(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function h(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function c(e){let n=null;return()=>(n==null&&(n=e()),n)}const T=c(function(){return h(/^Mac/i)}),j=c(function(){return h(/^iPhone/i)}),N=c(function(){return h(/^iPad/i)||T()&&navigator.maxTouchPoints>1}),W=c(function(){return j()||N()}),te=c(function(){return T()||W()}),ne=c(function(){return E(/AppleWebKit/i)&&!B()}),B=c(function(){return E(/Chrome/i)}),S=c(function(){return E(/Android/i)}),re=c(function(){return E(/Firefox/i)});let u=new Map,y=new Set;function M(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let n=r=>{if(!e(r)||!r.target)return;let o=u.get(r.target);o||(o=new Set,u.set(r.target,o),r.target.addEventListener("transitioncancel",t,{once:!0})),o.add(r.propertyName)},t=r=>{if(!e(r)||!r.target)return;let o=u.get(r.target);if(o&&(o.delete(r.propertyName),o.size===0&&(r.target.removeEventListener("transitioncancel",t),u.delete(r.target)),u.size===0)){for(let s of y)s();y.clear()}};document.body.addEventListener("transitionrun",n),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?M():document.addEventListener("DOMContentLoaded",M));function z(e){requestAnimationFrame(()=>{u.size===0?e():y.add(e)})}function oe(e,n){I(()=>{if(e&&e.ref&&n)return e.ref.current=n.current,()=>{e.ref&&(e.ref.current=null)}})}function U(e){return e.mozInputSource===0&&e.isTrusted?!0:S()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function ae(e){return!S()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}let i=null,$=new Set,l=new Map,f=!1,L=!1;const V={Tab:!0,Escape:!0};function w(e,n){for(let t of $)t(e,n)}function q(e){return!(e.metaKey||!T()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function p(e){f=!0,q(e)&&(i="keyboard",w("keyboard",e))}function a(e){i="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(f=!0,w("pointer",e))}function k(e){U(e)&&(f=!0,i="virtual")}function H(e){e.target===window||e.target===document||(!f&&!L&&(i="virtual",w("virtual",e)),f=!1,L=!1)}function _(){f=!1,L=!0}function m(e){if(typeof window>"u"||l.get(d(e)))return;const n=d(e),t=b(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){f=!0,r.apply(this,arguments)},t.addEventListener("keydown",p,!0),t.addEventListener("keyup",p,!0),t.addEventListener("click",k,!0),n.addEventListener("focus",H,!0),n.addEventListener("blur",_,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",a,!0),t.addEventListener("pointermove",a,!0),t.addEventListener("pointerup",a,!0)):(t.addEventListener("mousedown",a,!0),t.addEventListener("mousemove",a,!0),t.addEventListener("mouseup",a,!0)),n.addEventListener("beforeunload",()=>{A(e)},{once:!0}),l.set(n,{focus:r})}const A=(e,n)=>{const t=d(e),r=b(e);n&&r.removeEventListener("DOMContentLoaded",n),l.has(t)&&(t.HTMLElement.prototype.focus=l.get(t).focus,r.removeEventListener("keydown",p,!0),r.removeEventListener("keyup",p,!0),r.removeEventListener("click",k,!0),t.removeEventListener("focus",H,!0),t.removeEventListener("blur",_,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",a,!0),r.removeEventListener("pointermove",a,!0),r.removeEventListener("pointerup",a,!0)):(r.removeEventListener("mousedown",a,!0),r.removeEventListener("mousemove",a,!0),r.removeEventListener("mouseup",a,!0)),l.delete(t))};function G(e){const n=b(e);let t;return n.readyState!=="loading"?m(e):(t=()=>{m(e)},n.addEventListener("DOMContentLoaded",t)),()=>A(e,t)}typeof document<"u"&&G();function R(){return i!=="pointer"}function Y(){return i}function ie(e){i=e,w(e,null)}function ce(){m();let[e,n]=g.useState(i);return g.useEffect(()=>{let t=()=>{n(i)};return $.add(t),()=>{$.delete(t)}},[]),K()?null:e}const J=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Q(e,n,t){var r;const o=typeof window<"u"?d(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?d(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,C=typeof window<"u"?d(t==null?void 0:t.target).HTMLElement:HTMLElement,D=typeof window<"u"?d(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof o&&!J.has(t==null||(r=t.target)===null||r===void 0?void 0:r.type)||(t==null?void 0:t.target)instanceof s||(t==null?void 0:t.target)instanceof C&&(t==null?void 0:t.target.isContentEditable),!(e&&n==="keyboard"&&t instanceof D&&!V[t.key])}function de(e,n,t){m(),g.useEffect(()=>{let r=(o,s)=>{Q(!!(t!=null&&t.isTextInput),o,s)&&e(R())};return $.add(r),()=>{$.delete(r)}},n)}function fe(e){const n=b(e);if(Y()==="virtual"){let t=n.activeElement;z(()=>{n.activeElement===t&&e.isConnected&&x(e)})}else x(e)}export{fe as $,oe as a,b,ie as c,d,R as e,de as f,ne as g,W as h,te as i,T as j,Y as k,x as l,ce as m,re as n,N as o,z as p,ae as q,U as r,j as s,S as t};
