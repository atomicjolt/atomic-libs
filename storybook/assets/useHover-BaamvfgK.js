import{b as P,e as L}from"./useFocusable-B7HbK8LX.js";import{d as M}from"./usePress-DRrD1IP8.js";import{r as s}from"./index-BCtMShv3.js";let d=!1,g=0;function c(){d=!0,setTimeout(()=>{d=!1},50)}function H(f){f.pointerType==="touch"&&c()}function G(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",H):document.addEventListener("touchend",c),g++,()=>{g--,!(g>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",H):document.removeEventListener("touchend",c))}}function A(f){let{onHoverStart:l,onHoverChange:a,onHoverEnd:v,isDisabled:r}=f,[h,E]=s.useState(!1),t=s.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;s.useEffect(G,[]);let{addGlobalListener:$,removeAllGlobalListeners:m}=M(),{hoverProps:T,triggerHoverEnd:y}=s.useMemo(()=>{let b=(e,n)=>{if(t.pointerType=n,r||n==="touch"||t.isHovered||!e.currentTarget.contains(e.target))return;t.isHovered=!0;let i=e.currentTarget;t.target=i,$(P(e.target),"pointerover",p=>{t.isHovered&&t.target&&!L(t.target,p.target)&&u(p,p.pointerType)},{capture:!0}),l&&l({type:"hoverstart",target:i,pointerType:n}),a&&a(!0),E(!0)},u=(e,n)=>{let i=t.target;t.pointerType="",t.target=null,!(n==="touch"||!t.isHovered||!i)&&(t.isHovered=!1,m(),v&&v({type:"hoverend",target:i,pointerType:n}),a&&a(!1),E(!1))},o={};return typeof PointerEvent<"u"?(o.onPointerEnter=e=>{d&&e.pointerType==="mouse"||b(e,e.pointerType)},o.onPointerLeave=e=>{!r&&e.currentTarget.contains(e.target)&&u(e,e.pointerType)}):(o.onTouchStart=()=>{t.ignoreEmulatedMouseEvents=!0},o.onMouseEnter=e=>{!t.ignoreEmulatedMouseEvents&&!d&&b(e,"mouse"),t.ignoreEmulatedMouseEvents=!1},o.onMouseLeave=e=>{!r&&e.currentTarget.contains(e.target)&&u(e,"mouse")}),{hoverProps:o,triggerHoverEnd:u}},[l,a,v,r,t,$,m]);return s.useEffect(()=>{r&&y({currentTarget:t.target},t.pointerType)},[r]),{hoverProps:T,isHovered:h}}export{A as $};
