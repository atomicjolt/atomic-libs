import{c as K,d as G,a as O,b as q}from"./useObjectRef-B4hnndUj.js";import{r as d,R as M}from"./index-BCtMShv3.js";import{$ as V}from"./SSRProvider-DyiXDq2k.js";const v=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},$=e=>e&&"window"in e&&e.window===e?e:v(e).defaultView||window;function Y(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function J(e){return Y(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let Q=!1,X=!1;function Me(){return Q}function C(){return X}function De(e,n){if(!C())return n&&e?e.contains(n):!1;if(!e||!n)return!1;let t=n;for(;t!==null;){if(t===e)return!0;t.tagName==="SLOT"&&t.assignedSlot?t=t.assignedSlot.parentNode:J(t)?t=t.host:t=t.parentNode}return!1}const L=(e=document)=>{var n;if(!C())return e.activeElement;let t=e.activeElement;for(;t&&"shadowRoot"in t&&(!((n=t.shadowRoot)===null||n===void 0)&&n.activeElement);)t=t.shadowRoot.activeElement;return t};function Z(e){return C()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function y(e){if(ee())e.focus({preventScroll:!0});else{let n=te(e);e.focus(),ne(n)}}let h=null;function ee(){if(h==null){h=!1;try{document.createElement("div").focus({get preventScroll(){return h=!0,!0}})}catch{}}return h}function te(e){let n=e.parentNode,t=[],r=document.scrollingElement||document.documentElement;for(;n instanceof HTMLElement&&n!==r;)(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth)&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),n=n.parentNode;return r instanceof HTMLElement&&t.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),t}function ne(e){for(let{element:n,scrollTop:t,scrollLeft:r}of e)n.scrollTop=t,n.scrollLeft=r}function F(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function H(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function b(e){let n=null;return()=>(n==null&&(n=e()),n)}const A=b(function(){return H(/^Mac/i)}),re=b(function(){return H(/^iPhone/i)}),oe=b(function(){return H(/^iPad/i)||A()&&navigator.maxTouchPoints>1}),ae=b(function(){return re()||oe()}),ke=b(function(){return A()||ae()}),Ce=b(function(){return F(/AppleWebKit/i)&&!ie()}),ie=b(function(){return F(/Chrome/i)}),N=b(function(){return F(/Android/i)}),He=b(function(){return F(/Firefox/i)});let m=new Map,D=new Set;function B(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let n=r=>{if(!e(r)||!r.target)return;let o=m.get(r.target);o||(o=new Set,m.set(r.target,o),r.target.addEventListener("transitioncancel",t,{once:!0})),o.add(r.propertyName)},t=r=>{if(!e(r)||!r.target)return;let o=m.get(r.target);if(o&&(o.delete(r.propertyName),o.size===0&&(r.target.removeEventListener("transitioncancel",t),m.delete(r.target)),m.size===0)){for(let i of D)i();D.clear()}};document.body.addEventListener("transitionrun",n),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?B():document.addEventListener("DOMContentLoaded",B));function ce(e){requestAnimationFrame(()=>{m.size===0?e():D.add(e)})}function se(e,n){K(()=>{if(e&&e.ref&&n)return e.ref.current=n.current,()=>{e.ref&&(e.ref.current=null)}})}function ue(e){return e.mozInputSource===0&&e.isTrusted?!0:N()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Ae(e){return!N()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}const I=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],fe=I.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";I.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const de=I.join(':not([hidden]):not([tabindex="-1"]),');function le(e){return e.matches(fe)}function Ie(e){return e.matches(de)}class be{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function $e(e){let n=d.useRef({isFocused:!1,observer:null});K(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let t=G(r=>{e==null||e(r)});return d.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let o=r.target,i=c=>{n.current.isFocused=!1,o.disabled&&t(new be("blur",c)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};o.addEventListener("focusout",i,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&o.disabled){var c;(c=n.current.observer)===null||c===void 0||c.disconnect();let u=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),n.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}let x=!1;function Oe(e){for(;e&&!le(e);)e=e.parentElement;let n=$(e),t=n.document.activeElement;if(!t||t===e)return;x=!0;let r=!1,o=s=>{(s.target===t||r)&&s.stopImmediatePropagation()},i=s=>{(s.target===t||r)&&(s.stopImmediatePropagation(),!e&&!r&&(r=!0,y(t),a()))},c=s=>{(s.target===e||r)&&s.stopImmediatePropagation()},u=s=>{(s.target===e||r)&&(s.stopImmediatePropagation(),r||(r=!0,y(t),a()))};n.addEventListener("blur",o,!0),n.addEventListener("focusout",i,!0),n.addEventListener("focusin",u,!0),n.addEventListener("focus",c,!0);let a=()=>{cancelAnimationFrame(w),n.removeEventListener("blur",o,!0),n.removeEventListener("focusout",i,!0),n.removeEventListener("focusin",u,!0),n.removeEventListener("focus",c,!0),x=!1,r=!1},w=requestAnimationFrame(a);return a}let l=null,g=new Set,E=new Map,p=!1,k=!1;const pe={Tab:!0,Escape:!0};function S(e,n){for(let t of g)t(e,n)}function ve(e){return!(e.metaKey||!A()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function T(e){p=!0,ve(e)&&(l="keyboard",S("keyboard",e))}function f(e){l="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(p=!0,S("pointer",e))}function R(e){ue(e)&&(p=!0,l="virtual")}function j(e){e.target===window||e.target===document||x||!e.isTrusted||(!p&&!k&&(l="virtual",S("virtual",e)),p=!1,k=!1)}function U(){x||(p=!1,k=!0)}function P(e){if(typeof window>"u"||E.get($(e)))return;const n=$(e),t=v(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){p=!0,r.apply(this,arguments)},t.addEventListener("keydown",T,!0),t.addEventListener("keyup",T,!0),t.addEventListener("click",R,!0),n.addEventListener("focus",j,!0),n.addEventListener("blur",U,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",f,!0),t.addEventListener("pointermove",f,!0),t.addEventListener("pointerup",f,!0)):(t.addEventListener("mousedown",f,!0),t.addEventListener("mousemove",f,!0),t.addEventListener("mouseup",f,!0)),n.addEventListener("beforeunload",()=>{W(e)},{once:!0}),E.set(n,{focus:r})}const W=(e,n)=>{const t=$(e),r=v(e);n&&r.removeEventListener("DOMContentLoaded",n),E.has(t)&&(t.HTMLElement.prototype.focus=E.get(t).focus,r.removeEventListener("keydown",T,!0),r.removeEventListener("keyup",T,!0),r.removeEventListener("click",R,!0),t.removeEventListener("focus",j,!0),t.removeEventListener("blur",U,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",f,!0),r.removeEventListener("pointermove",f,!0),r.removeEventListener("pointerup",f,!0)):(r.removeEventListener("mousedown",f,!0),r.removeEventListener("mousemove",f,!0),r.removeEventListener("mouseup",f,!0)),E.delete(t))};function me(e){const n=v(e);let t;return n.readyState!=="loading"?P(e):(t=()=>{P(e)},n.addEventListener("DOMContentLoaded",t)),()=>W(e,t)}typeof document<"u"&&me();function Ee(){return l!=="pointer"}function ge(){return l}function Be(e){l=e,S(e,null)}function _e(){P();let[e,n]=d.useState(l);return d.useEffect(()=>{let t=()=>{n(l)};return g.add(t),()=>{g.delete(t)}},[]),V()?null:e}const we=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function he(e,n,t){let r=v(t==null?void 0:t.target);const o=typeof window<"u"?$(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?$(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,c=typeof window<"u"?$(t==null?void 0:t.target).HTMLElement:HTMLElement,u=typeof window<"u"?$(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof o&&!we.has(r.activeElement.type)||r.activeElement instanceof i||r.activeElement instanceof c&&r.activeElement.isContentEditable,!(e&&n==="keyboard"&&t instanceof u&&!pe[t.key])}function Ke(e,n,t){P(),d.useEffect(()=>{let r=(o,i)=>{he(!!(t!=null&&t.isTextInput),o,i)&&e(Ee())};return g.add(r),()=>{g.delete(r)}},n)}function Le(e){const n=v(e),t=L(n);if(ge()==="virtual"){let r=t;ce(()=>{L(n)===r&&e.isConnected&&y(e)})}else y(e)}function ye(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const i=d.useCallback(a=>{if(a.target===a.currentTarget)return r&&r(a),o&&o(!1),!0},[r,o]),c=$e(i),u=d.useCallback(a=>{const w=v(a.target),s=w?L(w):L();a.target===a.currentTarget&&s===Z(a.nativeEvent)&&(t&&t(a),o&&o(!0),c(a))},[o,t,c]);return{focusProps:{onFocus:!n&&(t||o||r)?u:void 0,onBlur:!n&&(r||o)?i:void 0}}}function _(e){if(!e)return;let n=!0;return t=>{let r={...t,preventDefault(){t.preventDefault()},isDefaultPrevented(){return t.isDefaultPrevented()},stopPropagation(){n?console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior."):n=!0},continuePropagation(){n=!1},isPropagationStopped(){return n}};e(r),n&&t.stopPropagation()}}function xe(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:_(e.onKeyDown),onKeyUp:_(e.onKeyUp)}}}let z=M.createContext(null);function Te(e){let n=d.useContext(z)||{};se(n,e);let{ref:t,...r}=n;return r}const Ne=M.forwardRef(function(n,t){let{children:r,...o}=n,i=q(t),c={...o,ref:i};return M.createElement(z.Provider,{value:c},r)});function Re(e,n){let{focusProps:t}=ye(e),{keyboardProps:r}=xe(e),o=O(t,r),i=Te(n),c=e.isDisabled?{}:i,u=d.useRef(e.autoFocus);d.useEffect(()=>{u.current&&n.current&&Le(n.current),u.current=!1},[n]);let a=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(a=void 0),{focusableProps:O({...o,tabIndex:a},c)}}export{Re as $,He as A,oe as B,ce as C,Ae as D,Oe as E,ue as F,Ne as G,_e as H,re as I,Me as J,$e as a,v as b,L as c,Z as d,De as e,be as f,se as g,Be as h,$ as i,Ee as j,Ke as k,ye as l,Ce as m,C as n,Ie as o,le as p,Le as q,N as r,ie as s,ge as t,ae as u,A as v,xe as w,z as x,y,ke as z};
